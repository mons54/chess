<div class="app-head mdl-shadow--2dp mdl-cell mdl-cell--12-col">
    <div class="app-profile">
        <div class="app__pull-left">
            <a show-profile="user" href>
                <img class="app-profile__avatar" ng-src="{{ user.avatar }}">
            </a>
        </div>
        <div class="app-profile__name">
            <a show-profile="user" class="app-profile__name" href>{{ user.name }}</a>
        </div>
        <div class="app-profile__info app-profile__info--blitz" title="{{ 'blitz'|translate }}">
            <i class="app-icon material-icons">flash_on</i>
            <div class="app-profile__info-content app-profile__info-content--points" title="{{ 'points'|translate }} ({{ 'blitz'|translate }})">
                {{ user.blitz.points }}
            </div>
            <div class="app-profile__info-content app-profile__info-content--ranking" title="{{ 'ranking'|translate }} ({{ 'blitz'|translate }})">
                <i class="app-icon material-icons">equalizer</i>
                {{ user.blitz.ranking | number }}
            </div>
        </div>
        <div class="app-profile__info app-profile__info--rapid" title="{{ 'rapid'|translate }}">
            <i class="app-icon material-icons">timer</i>
            <div class="app-profile__info-content app-profile__info-content--points" title="{{ 'points'|translate }} ({{ 'rapid'|translate }})">
                {{ user.rapid.points }}
            </div>
            <div class="app-profile__info-content app-profile__info-content--ranking" title="{{ 'ranking'|translate }} ({{ 'rapid'|translate }})">
                <i class="app-icon material-icons">equalizer</i>
                {{ user.rapid.ranking | number }}
            </div>
        </div>
    </div>
    <div class="app-button__create-game">
        <button show-modal="#modal-create-game"
                class="mdl-button mdl-button--colored mdl-button--raised mdl-js-button mdl-js-ripple-effect">
            {{ 'create_game' | translate }}
        </button>
    </div>
</div>

<div element class="app-element app-element--small mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col">
    <div class="app-element__head">
        <span>{{ 'games'|translate }}</span>
        <span class="app-element__badge">{{ createdGames.length || 0 }}</span>
        <div class="app-element__tools">
            <element-toggle></element-toggle>
        </div>
    </div>
    <div element-content class="app-element__body">
        <table ng-show="createdGames.length"
               class="app-table mdl-data-table mdl-js-data-table">
            <thead>
                <tr>
                    <th></th>
                    <th sortable collection="createdGames" expression="['points', 'time', 'color']" icon="star"></th>
                    <th sortable collection="createdGames" expression="['color', 'points', 'time']" icon="invert_colors"></th>
                    <th sortable collection="createdGames" expression="['time', 'points', 'color']" icon="watch_later"></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="game in createdGames">
                    <td show-profile="game" class="app-table__user mdl-data-table__cell--non-numeric">
                        <img class="app-table__avatar" ng-src="{{ game.avatar }}">
                        <span class="app-table__name">{{ game.name }}</span>
                    </td>
                    <td class="app-table__points">{{ game.points }}</td>
                    <td class="app-table__color" ng-class="getClassColorGame(game.color)"></td>
                    <td class="app-table__time">{{ game.game.time / 60 }} + {{ game.game.increment }}</td>
                    <td class="app-table__actions">
                        <button ng-if="game.uid == user.uid" 
                                ng-click="removeGame()" 
                                class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
                            <i class="material-icons">close</i>
                        </button>
                        <button ng-if="game.uid != user.uid" 
                                ng-click="startGame(game.uid)" 
                                class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-button--colored">
                            <i class="material-icons">check</i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
        <div ng-hide="createdGames.length" class="app-element__loading">
            <div class="app-spinner app-spinner--small"></div>
        </div>
    </div>
</div>

<div element 
     class="app-element app-element--small mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col">
    <div class="app-element__head">
        <span>{{ 'challenges'|translate }}</span>
        <span class="app-element__badge">{{ challenges.length }}</span>
        <div class="app-element__tools">
            <element-toggle hide="true"></element-toggle>
        </div>
    </div>
    <div element-content class="app-element__body">
        <table ng-if="challenges.length"
               class="app-table mdl-data-table mdl-js-data-table">
            <thead>
                <tr>
                    <th></th>
                    <th sortable collection="challenges" expression="['points', 'time', 'color']" icon="star"></th>
                    <th sortable collection="challenges" expression="['color', 'points', 'time']" icon="invert_colors"></th>
                    <th sortable collection="challenges" expression="['time', 'points', 'color']" icon="watch_later"></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="challenge in challenges">
                    <td show-profile="challenge" class="app-table__user mdl-data-table__cell--non-numeric">
                        <img class="app-table__avatar" ng-src="{{challenge.avatar}}">
                        <span class="app-table__name">{{ challenge.name }}</span>
                    </td>
                    <td class="app-table__points">{{ challenge.points }}</td>
                    <td class="app-table__color" ng-class="getClassColorGame(challenge.color)"></td>
                    <td class="app-table__time">{{ challenge.game.time / 60 }} + {{ challenge.game.increment }}</td>
                    <td class="app-table__actions">
                        <button ng-click="removeChallenge(challenge.uid)" 
                                class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
                            <i class="material-icons">close</i>
                        </button>
                        <button ng-if="!challenge.create" 
                                ng-click="startChallenge(challenge.uid)" 
                                class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-button--colored">
                            <i class="material-icons">check</i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div element class="app-element app-element--small mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col">
    <div class="app-element__head">
        <span>{{ 'challengers'|translate }}</span>
        <span class="app-element__badge">{{ challengers.length || 0 }}</span>
        <div class="app-element__tools">
            <element-toggle></element-toggle>
        </div>
    </div>
    <div element-content class="app-element__body">
        <table ng-show="challengers.length"
               class="app-table mdl-data-table mdl-js-data-table">
            <thead>
                <tr>
                    <th></th>
                    <th sortable collection="challengers" expression="['blitz.points', 'rapid.points']" icon="flash_on"></th>
                    <th sortable collection="challengers" expression="['rapid.points', 'blitz.points']" icon="timer"></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="challenger in challengers">
                    <td show-profile="challenger" class="app-table__user mdl-data-table__cell--non-numeric">
                        <img class="app-table__avatar" ng-src="{{challenger.avatar}}">
                        <span class="app-table__name">{{ challenger.name }}</span>
                    </td>
                    <td>
                        {{ challenger.blitz.points }}
                    </td>
                    <td>
                        {{ challenger.rapid.points }}
                    </td>
                    <td>
                        <button ng-disabled="blackList(challenger)"
                                ng-click="setChallenger(challenger)"
                                show-modal="#modal-challenger"
                                class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-button--colored">
                            <i class="material-icons">check</i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
        <div ng-hide="challengers.length" class="app-element__loading">
            <div class="app-spinner app-spinner--small"></div>
        </div>
    </div>
</div>

<div element 
     ng-if="friends.length"
     class="app-element app-element--small mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col">
    <div class="app-element__head">
        <span>{{ 'friends'|translate }}</span>
        <span class="app-element__badge">{{ friends.length }}</span>
        <div class="app-element__tools">
            <element-toggle></element-toggle>
        </div>
    </div>
    <div element-content class="app-element__body">
        <table class="app-table mdl-data-table mdl-js-data-table">
            <thead>
                <tr>
                    <th></th>
                    <th sortable collection="friends" expression="['blitz.points', 'rapid.points']" icon="flash_on"></th>
                    <th sortable collection="friends" expression="['rapid.points', 'blitz.points']" icon="timer"></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="friend in friends">
                    <td show-profile="friend" class="app-table__user mdl-data-table__cell--non-numeric">
                        <img class="app-table__avatar" ng-src="{{ friend.avatar }}">
                        <span class="app-table__name">{{ friend.name }}</span>
                    </td>
                    <td title="{{ 'blitz'|translate }}">
                        {{ friend.blitz.points }}
                    </td>
                    <td title="{{ 'rapid'|translate }}">
                        {{ friend.rapid.points }}
                    </td>
                    <td>
                        <button ng-disabled="blackList(friend)"
                                ng-click="setChallenger(friend)"
                                show-modal="#modal-challenger"
                                class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-button--colored">
                            <i class="material-icons">check</i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div id="modal-challenger" 
     class="app-modal app-modal__bg" 
     role="dialog" 
     aria-hidden="true"
     data-modal
     modal-close-bg>
    <div class="app-modal__dialog">
        <div class="app-modal__content">
            <div class="app-profile app-profile--challenger">
                <div class="app__pull-left">
                    <img class="app-profile__avatar" ng-src="{{ challenger.avatar }}">
                </div>
                <div class="app-profile__name">
                    <a class="app-profile__name" href>{{ challenger.name }}</a>
                </div>
                <div class="app-profile__info">
                    <span class="app-icon app-icon__ranking"></span>
                    <span>{{ challenger.ranking }}</span>
                </div>
                <div class="app-profile__info">
                    <span class="app-icon app-icon__points"></span>
                    <span>{{ challenger.points }}</span>
                </div>
            </div>
            <form ng-submit="createChallenge(challenger.uid)" role="form">
                <game-choices data="paramsGame" model="challenge"></game-choices>
                <div class="app-form__select">
                    <select ng-model="challenge.color" 
                            ng-options="value as value|translate for (key, value) in paramsGame.colors" 
                            id="challenge-color">
                            <option value="">{{ 'random' | translate }}</option>
                    </select>
                    <label for="challenge-color">{{ 'color'|translate }}</label>
                </div>
                <div class="app-modal__actions">
                    <button modal-close type="button" class="mdl-button mdl-button--raised">{{ 'cancel'|translate }}</button>
                    <button modal-close type="submit" class="mdl-button mdl-button--raised mdl-button--colored">{{ 'ok'|translate }}</button>
                </div>
            </form>
        </div>
    </div>
</div>
