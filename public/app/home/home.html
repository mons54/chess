
<div class="app-home-head mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col">
    <div profile user="user" class="app-profile">
        <div class="pull-left">
            <img class="app-profile-image" src="//graph.facebook.com/{{ user.uid }}/picture">
        </div>
        <div class="app-profile-name">
            <a class="app-profile-name" href>{{ user.name }}</a>
        </div>
        <div class="app-profile-info">
            <span class="icon icon-ranking"></span>
            <span>{{ user.ranking }}</span>
        </div>
        <div class="app-profile-info">
            <span class="icon icon-points"></span>
            <span>{{ user.points }}</span>
        </div>
    </div>
    <div class="button-create-game">
        <button show-modal modal="modal-create-game" class="mdl-button mdl-button--colored mdl-button--raised mdl-js-button mdl-js-ripple-effect">
            {{ 'create_game' | translate }}
        </button>
    </div>
</div>

<div element class="app-element mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col">
    <div class="app-element-head">
        <span>{{ 'games'|translate }}</span>
        <span class="info-tooltip">{{ createdGames.length || 0 }}</span>
        <div class="app-element-tools">
            <element-toggle></element-toggle>
        </div>
    </div>
    <div element-content class="app-element-body">
        <table ng-show="createdGames.length"
               class="app-element-table mdl-data-table mdl-js-data-table">
            <thead>
                <tr>
                    <th></th>
                    <th sortable predicate="points" icon="points"></th>
                    <th sortable predicate="color" icon="king"></th>
                    <th sortable predicate="time" icon="time"></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="game in createdGames | orderBy:predicate:reverse">
                    <td class="app-element-table-user mdl-data-table__cell--non-numeric">
                        <img class="app-element-table-user-picture" ng-src="//graph.facebook.com/{{game.uid}}/picture">
                        <span class="app-element-table-user-name">{{ game.name }}</span>
                    </td>
                    <td>{{ game.points }}</td>
                    <td>{{ game.color | translate }}</td>
                    <td>{{ game.time / 60 }}:00</td>
                    <td>
                        <button ng-if="game.uid == user.uid" 
                                ng-click="removeGame()" 
                                class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab">
                            <i class="material-icons">close</i>
                        </button>
                        <button ng-if="game.uid != user.uid" 
                                ng-click="startGame(game.uid)" 
                                class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored">
                            <i class="material-icons">check</i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
        <div ng-show="!createdGames.length" class="load-spin">
            <img src="/images/load-spin.svg">
        </div>
    </div>
</div>

<div element 
     ng-if="challenges.length"
     class="app-element mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col">
    <div class="app-element-head">
        <span>{{ 'challenges'|translate }}</span>
        <span class="info-tooltip">{{ challenges.length }}</span>
        <div class="app-element-tools">
            <element-toggle></element-toggle>
        </div>
    </div>
    <div element-content class="app-element-body">
        <table class="app-element-table mdl-data-table mdl-js-data-table">
            <thead>
                <tr>
                    <th></th>
                    <th sortable predicate="points" icon="points"></th>
                    <th sortable predicate="color" icon="king"></th>
                    <th sortable predicate="time" icon="time"></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="challenge in challenges | orderBy:predicate:reverse">
                    <td class="app-element-table-user mdl-data-table__cell--non-numeric">
                        <img class="app-element-table-user-picture" ng-src="//graph.facebook.com/{{challenge.uid}}/picture">
                        <span class="app-element-table-user-name">{{ challenge.name }}</span>
                    </td>
                    <td>{{ challenge.points }}</td>
                    <td>{{ challenge.color | translate }}</td>
                    <td>{{ challenge.time / 60 }}:00</td>
                    <td>
                        <button ng-click="removeChallenge(challenge.uid)" 
                                class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab">
                            <i class="material-icons">close</i>
                        </button>
                        <button ng-if="!challenge.create" 
                                ng-click="startChallenge(challenge.uid)" 
                                class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored">
                            <i class="material-icons">check</i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>


<div element class="app-element mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col">
    <div class="app-element-head">
        <span>{{ 'challengers'|translate }}</span>
        <span class="info-tooltip">{{ challengers.length || 0 }}</span>
        <div class="app-element-tools">
            <element-toggle></element-toggle>
        </div>
    </div>
    <div element-content class="app-element-body">
        <table class="app-element-table mdl-data-table mdl-js-data-table">
            <thead>
                <tr>
                    <th></th>
                    <th sortable predicate="points" icon="points"></th>
                    <th sortable predicate="ranking" icon="ranking"></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="challenger in challengers | orderBy:predicate:reverse">
                    <td class="app-element-table-user mdl-data-table__cell--non-numeric">
                        <img class="app-element-table-user-picture" ng-src="//graph.facebook.com/{{challenger.uid}}/picture">
                        <span class="app-element-table-user-name">{{ challenger.name }}</span>
                    </td>
                    <td>{{ challenger.points }}</td>
                    <td>{{ challenger.ranking }}</td>
                    <td>
                        <button ng-if="challenger.uid != user.uid"
                                ng-click="openModalChallenge(challenger)"
                                class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored">
                            <i class="material-icons">check</i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
        <div ng-show="!challengers.length" class="load-spin">
            <img src="/images/load-spin.svg">
        </div>
    </div>
</div>

<div id="modal-create-game" class="modal modal__bg" role="dialog" aria-hidden="true">
    <div class="modal__dialog">
        <div class="modal__content">
            <form ng-submit="createGame()" role="form">
                <div class="mui-select">
                    <select ng-model="game.color" 
                            ng-options="value as value|translate for (key, value) in paramsGame.colors" 
                            id="create-game-color">
                    </select>
                    <label for="create-game-color">{{ 'color'|translate }}</label>
                </div>
                <div class="mui-select">
                    <select ng-model="game.time"
                            ng-options="value as (value / 60) + ' ' + 'minutes'|translate for (key, value) in paramsGame.times" 
                            id="create-game-time">
                    </select>
                    <label for="create-game-time">{{ 'time'|translate }}</label>
                </div>
                <div class="mui-select">
                    <div class="mdl-grid">
                        <select ng-model="game.pointsMin"
                                ng-options="value as value for (key, value) in paramsGame.pointsMin" 
                                id="create-game-points" 
                                class="mdl-cell--6-col">
                            <option value="">{{ 'min'|translate }}</option>
                        </select>
                        <select ng-model="game.pointsMax"
                                ng-options="value as value for (key, value) in paramsGame.pointsMax"
                                class="mdl-cell--6-col">
                            <option value="">{{ 'max'|translate }}</option>
                        </select>
                    </div>
                    <label for="create-game-points">{{ 'points'|translate }}</label>
                </div>
                <div class="modal__actions">
                    <button modal-close type="reset" class="mdl-button mdl-button--raised close">{{ 'cancel'|translate }}</button>
                    <button modal-close type="submit" class="mdl-button mdl-button--raised mdl-button--colored close">{{ 'ok'|translate }}</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div modal-challenge class="modal fade" id="modal-challenge"></div>
