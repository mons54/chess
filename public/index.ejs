<!doctype html>
<html lang="<%= lang %>" ng-app="app" data-facebook="<%= facebook %>"">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="<%= description %>">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

        <meta property="og:url" content="https://worldofchess.online"/>
        <meta property="og:title" content="<%= title %>" />
        <meta property="og:description" content="<%= description %>" />
        <meta property="og:image" content="https://worldofchess.online/images/logo.png" />
        <meta property="fb:app_id" content="1687859708170830" />

        <meta property="og:title" content="<%= title %>" />
        <meta property="og:description" content="<%= description %>" />
        <meta property="og:image" content="https://worldofchess.online/images/logo.png" />

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@WorldOfChess_" />
        <meta name="twitter:title" content="<%= title %>" />
        <meta name="twitter:description" content="<%= description %>" />
        <meta name="twitter:image" content="https://worldofchess.online/images/logo.png" />

        <base href="/">
        
        <title><%= title %> - World of Chess</title>

        <link rel="shortcut icon" href="/images/favicon.ico">

        <!-- Page styles -->
        <link href="css/material/material.min.css" rel="stylesheet">
        <link href="css/material/icon.css" rel="stylesheet" >
        <link href="css/style.css" rel="stylesheet">
        <link ng-if="lang() == 'ar'" ng-href="css/style-ar.css" rel="stylesheet">
    </head>
    <body>

        <div ng-show="loading" class="app-loading">
            <div ng-hide="socketServerDisconnect || unauthorized" class="app-loader mdl-progress mdl-js-progress mdl-progress__indeterminate"></div>
            <i ng-show="socketServerDisconnect" 
                ng-click="reconnect()"
                ng-bind="'play_arrow'"
                class="app__clickable app__action material-icons">
            </i>
            <i ng-show="unauthorized"
               ng-bind="'remove_circle'" 
               class="app__action material-icons">
            </i>
        </div>

        <div id="modal-connect" 
             class="app-modal app-modal__bg" 
             role="dialog" 
             aria-hidden="true">
            <div class="app-modal__content">
                <div class="app-modal__logo">
                    <span class="app-logo">
                        <span class="app-logo__icon"></span>
                        <span class="app-logo__text" ng-bind="'name'|translate"></span>
                    </span>
                </div>
                <div class="app-login__content-button">
                    <button class="app-login__button app-login__button--facebook" ng-click="facebookLogin()">
                        {{ 'login_with_facebook' | translate }}
                    </button>
                </div>
                <div class="app-login__content-button">
                    <button class="app-login__button app-login__button--google" ng-click="googleLogin()">
                        {{ 'login_with_google' | translate }}
                    </button>
                </div>
            </div>
        </div>

        <div class="app-layout mdl-layout mdl-js-layout mdl-layout--fixed-header" 
             ng-show="!loading" 
             ng-class="{'is-user-game': user.gid, 'is-game': isGame, 'is-toggle': isToggle }"
             data-layout>
             
            <header class="app-header mdl-layout__header">
                <div class="app-header__row mdl-layout__header-row">
                    <span class="app-title mdl-layout-title">
                        <span class="app-logo">
                            <span class="app-logo__icon"></span>
                            <span class="app-logo__text" ng-bind="'name'|translate"></span>
                        </span>
                    </span>
                    <!-- Add spacer, to align navigation to the right in desktop -->
                    <div class="app-header-spacer mdl-layout-spacer"></div>
              
                    <!-- Navigation -->
                    <div class="app-navigation__container">
                        <nav class="app-navigation mdl-navigation">
                            <a class="mdl-navigation__link mdl-typography--text-uppercase" 
                               href="/"
                               ng-bind="'home'|translate">
                            </a>
                            <a class="mdl-navigation__link mdl-typography--text-uppercase" 
                               href="/ranking"
                               ng-bind="'ranking'|translate">
                            </a>
                            <a class="mdl-navigation__link mdl-typography--text-uppercase" 
                               href="/trophies"
                               ng-bind="'trophies.title'|translate">
                            </a>
                            <a class="mdl-navigation__link mdl-typography--text-uppercase" 
                               href
                               ng-hide="user.gid"
                               show-modal="#modal-create-game">
                                {{ 'create_game' | translate }}
                            </a>
                            <a class="mdl-navigation__link mdl-typography--text-uppercase" 
                               href
                               ng-click="logout()"
                               ng-hide="isFacebookApp || user.gid">
                               <i class="material-icons">power_settings_new</i>
                            </a>
                        </nav>
                    </div>
                    <span class="app-mobile__title mdl-layout-title">
                        <span class="app-logo">
                            <span class="app-logo__icon"></span>
                            <span class="app-logo__text" ng-bind="'name'|translate"></span>
                        </span>
                    </span>
                </div>
            </header>


            <div class="app-drawer mdl-layout__drawer">
                <span class="app-layout-title mdl-layout-title">
                    <span class="app-logo">
                        <span class="app-logo__icon"></span>
                        <span class="app-logo__text" ng-bind="'name'|translate"></span>
                    </span>
                </span>
                <nav class="mdl-navigation">
                    <a class="mdl-navigation__link" 
                       href="/" 
                       ng-click="closeDrawer()">
                        <i class="material-icons" role="presentation">home</i>
                        {{ 'home' | translate }}
                    </a>
                    <a class="mdl-navigation__link" 
                       href="/ranking"
                       ng-click="closeDrawer()">
                        <i class="material-icons" role="presentation">looks_one</i>
                        {{ 'ranking' | translate }}
                    </a>
                    <a class="mdl-navigation__link" 
                       href="/trophies"
                       ng-click="closeDrawer()">
                        <i class="material-icons" role="presentation">star</i>
                        {{ 'trophies.title' | translate }}
                    </a>
                    <a class="mdl-navigation__link" 
                       href
                       ng-click="closeDrawer()"
                       show-modal="#modal-create-game">
                        <i class="material-icons">games</i>
                        {{ 'create_game' | translate }}
                    </a>
                    <a class="mdl-navigation__link" 
                       href
                       ng-click="closeDrawer(); logout()">
                        <i class="material-icons" role="presentation">power_settings_new</i>
                        {{ 'logout' | translate }}
                    </a>
                </nav>
            </div>

            <div class="app-content mdl-layout__content">
                <a name="top"></a>
                <div class="app-grid mdl-grid" ng-if="ready" ng-view></div>
                <footer class="app-footer">
                    <a id="fanpage" href="https://www.facebook.com/ChessCommunity" target="_blank">{{ 'fanpage' | translate }}</a>
                </footer>
            </div>

            <div class="app-button__fixed" ng-class="{'app-button__fixed--pagination': pages }">
                <button class="app-button app-button--create-game mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"
                        ng-hide="isGame"
                        show-modal="#modal-create-game">
                    <i class="material-icons">games</i>
                </button>
            </div>

            <div class="app-pagination app-pagination--fixed" pagination></div>

            <modal-profile></modal-profile>
            <modal-trophy></modal-trophy>
            <modal-create-game></modal-create-game>
        </div>
          
        <div id="fb-root"></div>

        <script src="https://apis.google.com/js/api.js"></script>
        <script src="https://apis.google.com/js/plusone.js" async defer></script>

        <script src="socket.io/socket.io.js"></script>

        <script src="chess.js"></script>

        <script src="lib/jquery.min.js"></script>
        <script src="lib/jquery-ui.min.js"></script>

        <script src="lib/progress-bar.min.js"></script>

        <script src="lib/material.min.js"></script>

        <script src="lib/angular.min.js"></script>
        <script src="lib/angular-route.min.js"></script>
        <script src="lib/angular-cookies.min.js"></script>

        <script src="app/app.js"></script>

        <script src="app/global/global.module.js"></script>

        <script src="app/facebook/facebook.module.js"></script>

        <script src="app/google/google.module.js"></script>

        <script src="app/components/components.module.js"></script>
        <script src="app/components/components.services.js"></script>
        <script src="app/components/components.directives.js"></script>

        <script src="app/game/game.module.js"></script>
        <script src="app/game/game.controllers.js"></script>
        <script src="app/game/game.directives.js"></script>

        <script src="app/home/home.module.js"></script>
        <script src="app/home/home.controllers.js"></script>

        <script src="app/ranking/ranking.module.js"></script>
        <script src="app/ranking/ranking.controllers.js"></script>

        <script src="app/trophies/trophies.module.js"></script>
        <script src="app/trophies/trophies.controllers.js"></script>
    </body>
</html>
